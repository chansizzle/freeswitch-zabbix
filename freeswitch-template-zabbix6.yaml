zabbix_export:
  version: '6.0'
  date: '2024-01-02T21:58:12Z'
  groups:
    - uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
  templates:
    - uuid: 4379cb7e68c3440ba4f23ba239607214
      template: Freeswitch
      name: Freeswitch
      description: |
        Freeswitch template created by MXSIP IT Team
        
        Requires the following to be added to the /etc/zabbix/zabbix_agend.conf file:
        
        AllowKey=system.run["systemctl status freeswitch | grep -q running;echo $?"]
      groups:
        - name: Templates
      items:
        - uuid: 28e4d34dcdc04fe7ae5de80cd96bc60f
          name: 'Service: Freeswitch'
          key: 'system.run["systemctl status freeswitch | grep -q running;echo $?"]'
          delay: 5m
          tags:
            - tag: Application
              value: Freeswitch
          triggers:
            - uuid: 5f94e59ea6104e95b4ef53ed8a32eb08
              expression: 'last(/Freeswitch/system.run["systemctl status freeswitch | grep -q running;echo $?"])<>0'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Freeswitch/system.run["systemctl status freeswitch | grep -q running;echo $?"])=0'
              name: 'Check: Freeswitch Service'
      discovery_rules:
        - uuid: 8b66f90a2e35454ab3e2a1629731511a
          name: 'Freeswitch Gateway Discovery'
          key: freeswitch.discover
          delay: 24h
          item_prototypes:
            - uuid: 9ead62b8306b4c1e8c747f30ad9fb95a
              name: 'Inbound Calls {#GATEWAY} ({#UUID})'
              key: 'freeswitch.inbound[{#GATEWAY}]'
              units: calls
              tags:
                - tag: Application
                  value: Freeswitch
            - uuid: 6267dcc4674642c28cbbe5d0bc9cf222
              name: 'Outbound Calls {#GATEWAY} ({#UUID})'
              key: 'freeswitch.outbound[{#UUID}]'
              units: calls
              tags:
                - tag: Application
                  value: Freeswitch
